# Nim

## Overview

This directory contains the bindings for the nim project. There are two sub directories, `nim_code` and `rust_code`.

- `rust_code` contains a rust crate that will call nbindgen to build the nim header file needed to allow the static library built from the FFI code in `bindings/c` to communicate with the nim package in `nim_code`.

 > The autogenerated file is called `header.nim` and is copied into the `nim_code` directory.

- `nim_code` contains the nim code that will expose an API allowing nim packages execute DAS related methods.

## Building

There are two steps to building:

- Building the static library
- Building the nim code

### Building the static library

These easiest way to build the static library, is to call `scripts/compile.sh`. This is located at the root of the directory. Calling this script will compile the necessary code for your platform and copy the static library into the relevant directory in `nim_code`.

Once the script has been called, one can view the code in `nim_code` as being self-contained.

### Building the nim code

Once the static library has been built and copied into `nim_code`, the instructions to build the nim codebase follows a regular nimble package:

```
nimble install
```

## Testing

Given that we have successfully built the static lib and installed all of the dependencies using `nimble install`. To test, we can run:

```
nimble test
```
